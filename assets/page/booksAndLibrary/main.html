<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Books and Library - Spaceberry</title>
    <link
      rel="icon"
      href="/spaceberry/assets/img/favicon.png"
      type="image/png"
    />
    <link rel="stylesheet" href="/spaceberry/assets/css/style.css" />
    <link rel="stylesheet" href="/spaceberry/assets/css/settings.css" />
  </head>

  <body class="settings-page">
    <div class="container">
      <!-- SIDEBAR START -->
      <aside class="sidebar">
        <img src="/spaceberry/assets/img/logo (2).png" alt="Spaceberry" />
        <nav>
          <a href="/spaceberry/index.html" class="nav-item active"
            ><i data-feather="home"></i><span>Dashboard</span></a
          >
          <a href="/spaceberry/assets/page/dictionary.html" class="nav-item"
            ><i data-feather="book-open"></i><span>Dictionary</span></a
          >
          <a href="/spaceberry/assets/page/schedule.html" class="nav-item"
            ><i data-feather="calendar"></i><span>Schedule</span></a
          >
          <a href="/spaceberry/assets/page/settings.html" class="nav-item"
            ><i data-feather="settings"></i><span>Settings</span></a
          >
        </nav>
        <div class="contact-box">
          <i data-feather="mail" class="contact-icon"></i>
          <p class="contact-text">Need help or have questions?</p>
          <a href="https://wa.me/6289503711530"
            ><button class="contact-btn">Contact Us</button></a
          >
        </div>
      </aside>
      <!-- SIDEBAR END -->

      <main class="main-content bmc-1">
        <!-- CARD START -->
        <section class="word-sets">
          <h3>Books</h3>
          <div class="cards">
            <div class="card bc-1">
              <a href="/spaceberry/assets/page/booksAndLibrary/modul1.html"
                ><i
                  data-feather="arrow-up-right"
                  class="arrow-icon"
                  style="width: 40px; height: 40px"
                ></i
              ></a>
              <img
                src="/spaceberry/assets/img/books.png"
                alt="Books"
                class="c1-modul"
              />
              <div class="card-title-book">Modul 1</div>
            </div>

            <div class="card bc-1">
              <a href="/spaceberry/assets/page/booksAndLibrary/modul2.html"
                ><i
                  data-feather="arrow-up-right"
                  class="arrow-icon"
                  style="width: 40px; height: 40px"
                ></i
              ></a>
              <img
                src="/spaceberry/assets/img/books.png"
                alt="Books"
                class="c1-modul"
              />
              <div class="card-title-book">Modul 2</div>
            </div>
            <div class="card bc-1">
              <a href="/spaceberry/assets/page/booksAndLibrary/modul3.html"
                ><i
                  data-feather="arrow-up-right"
                  class="arrow-icon"
                  style="width: 40px; height: 40px"
                ></i
              ></a>
              <img
                src="/spaceberry/assets/img/books.png"
                alt="Books"
                class="c1-modul"
              />
              <div class="card-title-book">Modul 3</div>
            </div>
          </div>
        </section>

        <section class="word-sets">
          <div class="cards">
            <div class="card bc-1">
              <a href="/spaceberry/assets/page/booksAndLibrary/modul4.html"
                ><i
                  data-feather="arrow-up-right"
                  class="arrow-icon"
                  style="width: 40px; height: 40px"
                ></i
              ></a>
              <img
                src="/spaceberry/assets/img/books.png"
                alt="Books"
                class="c1-modul"
              />
              <div class="card-title-book">Modul 4</div>
            </div>
            <div class="card bc-1">
              <a href="/spaceberry/assets/page/booksAndLibrary/modul5.html"
                ><i
                  data-feather="arrow-up-right"
                  class="arrow-icon"
                  style="width: 40px; height: 40px"
                ></i
              ></a>
              <img
                src="/spaceberry/assets/img/books.png"
                alt="Books"
                class="c1-modul"
              />
              <div class="card-title-book">Modul 5</div>
            </div>
            <div class="card bc-1">
              <a href="/spaceberry/assets/page/booksAndLibrary/modul6.html"
                ><i
                  data-feather="arrow-up-right"
                  class="arrow-icon"
                  style="width: 40px; height: 40px"
                ></i
              ></a>
              <img
                src="/spaceberry/assets/img/books.png"
                alt="Books"
                class="c1-modul"
              />
              <div class="card-title-book">Modul 6</div>
            </div>
          </div>
        </section>

        <section class="word-sets">
          <div class="cards">
            <div class="card bc-1">
              <a href="/spaceberry/assets/page/booksAndLibrary/modul7.html"
                ><i
                  data-feather="arrow-up-right"
                  class="arrow-icon"
                  style="width: 40px; height: 40px"
                ></i
              ></a>
              <img
                src="/spaceberry/assets/img/books.png"
                alt="Books"
                class="c1-modul"
              />
              <div class="card-title-book">Modul 7</div>
            </div>
            <div class="card bc-1">
              <a href="/spaceberry/assets/page/booksAndLibrary/modul8.html"
                ><i
                  data-feather="arrow-up-right"
                  class="arrow-icon"
                  style="width: 40px; height: 40px"
                ></i
              ></a>
              <img
                src="/spaceberry/assets/img/books.png"
                alt="Books"
                class="c1-modul"
              />
              <div class="card-title-book">Modul 8</div>
            </div>
            <div class="card bc-1">
              <a href="/spaceberry/assets/page/booksAndLibrary/modul9.html"
                ><i
                  data-feather="arrow-up-right"
                  class="arrow-icon"
                  style="width: 40px; height: 40px"
                ></i
              ></a>
              <img
                src="/spaceberry/assets/img/books.png"
                alt="Books"
                class="c1-modul"
              />
              <div class="card-title-book">Modul 9</div>
            </div>
          </div>
        </section>
        <!-- CARD END -->

        <!-- STATISTIK START -->
        <section class="statistics">
          <h3>Statistics of Learn</h3>
          <div id="realtimeChart" class="chart-placeholder cp-book"></div>
        </section>
        <!-- STATISTIK END -->
      </main>
    </div>

    <div class="contact-query">
      <a href="https://wa.me/6289503711530"
        ><i data-feather="help-circle"></i
      ></a>
    </div>

    <button id="scrollTopBtn" aria-label="Scroll to top">
      <i data-feather="arrow-up"></i>
    </button>
    <script>
      const scrollTopBtn = document.getElementById("scrollTopBtn");
      scrollTopBtn.addEventListener("click", () => {
        window.scrollTo({ top: 0, behavior: "smooth" });
      });
    </script>

    <script src="/spaceberry/assets/js/feather.min.js"></script>
    <script src="/spaceberry/assets/js/script.js"></script>
    <script src="/spaceberry/assets/js/apexcharts.min.js"></script>
    <script src="/spaceberry/assets/js/chart-script.js"></script>
    <script src="/spaceberry/assets/js/settings.js"></script>

    <script>
      feather.replace();
    </script>

    <!-- Firebase Core -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyBDIYWlSgxpjdpHAs6xKFJGaTvM86EKe-4",
        authDomain: "spaceberry-bf68b.firebaseapp.com",
        projectId: "spaceberry-bf68b",
        storageBucket: "spaceberry-bf68b.firebasestorage.app",
        messagingSenderId: "185481236967",
        appId: "1:185481236967:web:222422307c4218517fed42",
        measurementId: "G-2E7GZY8NNE",
      };

      firebase.initializeApp(firebaseConfig);
      const auth = firebase.auth();
      const db = firebase.firestore();

      document.addEventListener("DOMContentLoaded", () => {
        const auth = firebase.auth();
        const db = firebase.firestore();
        const moduleLinks = document.querySelectorAll("a[href*='modul']"); // ðŸ”§ FIX

        auth.onAuthStateChanged((user) => {
          if (!user) return;

          moduleLinks.forEach((link) => {
            link.addEventListener("click", (e) => {
              e.preventDefault();

              const target = link.getAttribute("href");
              console.log("Modul diklik:", target);
              link.style.pointerEvents = "none";

              db.collection("users")
                .doc(user.uid)
                .set(
                  {
                    lessons: firebase.firestore.FieldValue.increment(1),
                  },
                  { merge: true }
                )
                .then(() => {
                  window.location.href = target;
                })
                .catch((err) => {
                  console.error("Gagal menambah lesson:", err);
                  window.location.href = target;
                });
            });
          });
        });
      });
    </script>
  </body>
</html>
