<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login | Spaceberry</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  </head>
  <body>
    <h2>Login to Spaceberry</h2>

    <input type="email" id="email" placeholder="Email" /><br />
    <input type="password" id="password" placeholder="Password" /><br />
    <button onclick="login()">Login</button>
    <button onclick="register()">Register</button>
    <p id="msg"></p>

    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyBDIYWlSgxpjdpHAs6xKFJGaTvM86EKe-4",
        authDomain: "spaceberry-bf68b.firebaseapp.com",
        projectId: "spaceberry-bf68b",
        storageBucket: "spaceberry-bf68b.firebasestorage.app",
        messagingSenderId: "185481236967",
        appId: "1:185481236967:web:222422307c4218517fed42",
        measurementId: "G-2E7GZY8NNE",
      };

      firebase.initializeApp(firebaseConfig);
      const auth = firebase.auth();

      function login() {
        const email = emailInput.value;
        const password = passwordInput.value;
        auth
          .signInWithEmailAndPassword(email, password)
          .then(() => (location.href = "/index.html"))
          .catch((err) => (msg.innerText = err.message));
      }

      function register() {
        const email = emailInput.value;
        const password = passwordInput.value;
        auth
          .createUserWithEmailAndPassword(email, password)
          .then(
            () =>
              (msg.innerText = "Registration successful. You can now login.")
          )
          .catch((err) => (msg.innerText = err.message));
      }

      const emailInput = document.getElementById("email");
      const passwordInput = document.getElementById("password");
      const msg = document.getElementById("msg");

      // Auto redirect if already logged in
      auth.onAuthStateChanged((user) => {
        if (user) {
          // Sudah login, langsung masuk dashboard
          location.href = "/index.html";
        }
      });
    </script>
  </body>
</html>
